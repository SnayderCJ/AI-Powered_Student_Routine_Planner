{% extends 'base.html' %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="flex flex-col gap-6 lg:gap-8">

    <section>
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
            <div>
                <h2 class="text-lg font-semibold tracking-tight">Acciones rápidas</h2>
                <p class="text-sm text-muted-foreground">Accede a las funciones más utilizadas</p>
            </div>

            <div class="mt-4 flex shrink-0 flex-wrap gap-2 md:mt-0">
                <button title="Nueva tarea" class="flex items-center gap-2 rounded-lg border border-border bg-card p-2.5 text-sm transition-colors hover:bg-accent hover:border-accent">
                    <i class="fas fa-plus-circle text-lg text-primary"></i>
                </button>
                <button title="Nuevo Evento" class="flex items-center gap-2 rounded-lg border border-border bg-card p-2.5 text-sm transition-colors hover:bg-accent hover:border-accent">
                    <i class="fas fa-calendar-plus text-lg text-primary"></i>
                </button>
                <button title="Iniciar Pomodoro" class="flex items-center gap-2 rounded-lg border border-border bg-card p-2.5 text-sm transition-colors hover:bg-accent hover:border-accent">
                    <i class="fas fa-clock text-lg text-primary"></i>
                </button>
            </div>
        </div>
    </section>

    <div class="grid grid-cols-1 gap-6 lg:grid-cols-3 lg:gap-8">
        
        <div class="flex flex-col gap-6 lg:col-span-2 lg:gap-8">
            <section class="rounded-xl border border-border bg-card">
                <div class="p-4 sm:p-6">
                    <h2 class="text-lg font-semibold tracking-tight">Mi espacio de trabajo</h2>
                    <p class="text-sm text-muted-foreground">Gestiona tus tareas y horario académico</p>
                </div>
                <div class="border-b border-border">
                    <nav id="workspace-tabs" class="-mb-px flex gap-6 px-4 sm:px-6">
                        <button data-tab="tasks" class="whitespace-nowrap border-b-2 border-primary py-3 text-sm font-medium text-primary transition-colors">Tareas</button>
                        <button data-tab="calendar" class="whitespace-nowrap border-b-2 border-transparent py-3 text-sm font-medium text-muted-foreground transition-colors hover:border-border hover:text-foreground">Calendario</button>
                    </nav>
                </div>
                <div class="p-4 sm:p-6">
                    <div id="tasks-content" class="tab-content">
                        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3">
                            <div class="flex flex-col gap-4">
                                <div class="flex items-center justify-between"><h3 class="font-semibold">Pendientes</h3><span class="rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-muted-foreground">3</span></div>
                                <div class="flex flex-col gap-4">
                                    <div class="rounded-lg border border-border bg-background p-4"><h4 class="font-medium">Completar informe de laboratorio</h4><p class="mt-1.5 text-xs text-muted-foreground flex items-center gap-1.5"><i class="fa-solid fa-clock"></i><span>Hoy, 19:00</span></p><div class="mt-3"><span class="rounded-full bg-red-500/20 px-2.5 py-0.5 text-xs text-red-400">Química</span></div></div>
                                    <div class="rounded-lg border border-border bg-background p-4"><h4 class="font-medium">Estudiar para examen de matemáticas</h4><p class="mt-1.5 text-xs text-muted-foreground flex items-center gap-1.5"><i class="fa-solid fa-clock"></i><span>Mañana, 09:00</span></p><div class="mt-3"><span class="rounded-full bg-blue-500/20 px-2.5 py-0.5 text-xs text-blue-400">Matemáticas</span></div></div>
                                </div>
                            </div>
                            <div class="flex flex-col gap-4"><div class="flex items-center justify-between"><h3 class="font-semibold">En progreso</h3><span class="rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-muted-foreground">1</span></div><div class="flex flex-col gap-4"><div class="rounded-lg border border-border bg-background p-4"><h4 class="font-medium">Revisar notas de clase</h4><p class="mt-1.5 text-xs text-muted-foreground flex items-center gap-1.5"><i class="fa-solid fa-clock"></i><span>En 5 días</span></p><div class="mt-3"><span class="rounded-full bg-yellow-500/20 px-2.5 py-0.5 text-xs text-yellow-400">Historia</span></div></div></div></div>
                            <div class="flex flex-col gap-4"><div class="flex items-center justify-between"><h3 class="font-semibold">Completadas</h3><span class="rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-muted-foreground">1</span></div><div class="flex flex-col gap-4"><div class="rounded-lg border border-border bg-background p-4 opacity-60"><h4 class="font-medium line-through">Leer capitulo 5 de programación</h4><p class="mt-1.5 text-xs text-muted-foreground flex items-center gap-1.5"><i class="fa-solid fa-check"></i><span>Completada</span></p><div class="mt-3"><span class="rounded-full bg-green-500/20 px-2.5 py-0.5 text-xs text-green-400">Programación</span></div></div></div></div>
                        </div>
                    </div>
                    <div id="calendar-content" class="tab-content hidden"><p>Aquí irá el componente de calendario.</p></div>
                </div>
            </section>
        </div>

        <div class="flex flex-col gap-6 lg:gap-8">
            <section class="rounded-xl border-2 border-primary/20 bg-card p-6 text-center">
                <h2 class="font-semibold tracking-tight">Modo Pomodoro: Concentración</h2>
                <p class="mt-4 text-6xl font-bold tracking-tighter">25:00</p>
                <div class="mt-6 flex w-full gap-2">
                    <button class="w-full rounded-lg bg-secondary py-2 text-sm text-muted-foreground transition-colors hover:bg-accent hover:text-foreground">Reiniciar</button>
                    <button class="w-full rounded-lg bg-primary py-2 text-sm text-primary-foreground transition-colors hover:bg-primary-hover">Iniciar</button>
                </div>
            </section>
            <section class="rounded-xl border border-border bg-card"><div class="p-4 sm:p-6"><h2 class="font-semibold tracking-tight">Próximas entregas</h2></div><div class="flex flex-col gap-4 p-4 sm:p-6 pt-0"><div class="flex items-start gap-4"><div class="mt-1 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-red-500/20 text-red-400"><i class="fas fa-calendar-day"></i></div><div class="flex-1"><p class="font-medium">Examen de Matemáticas</p><p class="text-xs text-muted-foreground">Mañana, 10:00</p></div><span class="text-xs text-muted-foreground">Matemáticas</span></div><div class="flex items-start gap-4"><div class="mt-1 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-red-500/20 text-red-400"><i class="fas fa-file-alt"></i></div><div class="flex-1"><p class="font-medium">Entrega de Proyecto</p><p class="text-xs text-muted-foreground">Viernes, 23:00</p></div><span class="text-xs text-muted-foreground">Programación</span></div><div class="flex items-start gap-4"><div class="mt-1 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-yellow-500/20 text-yellow-400"><i class="fas fa-flask"></i></div><div class="flex-1"><p class="font-medium">Informe de Laboratorio</p><p class="text-xs text-muted-foreground">Próxima semana</p></div><span class="text-xs text-muted-foreground">Química</span></div></div></section>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabsContainer = document.getElementById('workspace-tabs');
    if (!tabsContainer) return;

    const tabButtons = tabsContainer.querySelectorAll('button');
    const tasksContent = document.getElementById('tasks-content');
    const calendarContent = document.getElementById('calendar-content');
    const contentPanels = [tasksContent, calendarContent];

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Desactivar todos los botones
            tabButtons.forEach(btn => {
                btn.classList.remove('border-primary', 'text-primary');
                btn.classList.add('border-transparent', 'text-muted-foreground');
            });
            
            // Activar el botón clickeado
            button.classList.add('border-primary', 'text-primary');
            button.classList.remove('border-transparent', 'text-muted-foreground');
            
            // Ocultar todos los paneles
            contentPanels.forEach(panel => {
                if(panel) panel.classList.add('hidden');
            });

            // Mostrar el panel correcto
            const targetContent = document.getElementById(button.dataset.tab + '-content');
            if(targetContent) {
                targetContent.classList.remove('hidden');
            }
        });
    });
});
</script>
{% endblock extra_js %}